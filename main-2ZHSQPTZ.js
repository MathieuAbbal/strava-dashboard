import{c as I,e as G,f as h,g as P,h as z,i as B,j as U}from"./chunk-HHVMX6SB.js";import{Ga as k,Jb as x,P as d,Qa as c,Ra as v,U as w,V as C,Va as M,W as u,Wa as e,X as g,Xa as n,Ya as s,ab as N,ea as T,eb as b,fa as V,gb as p,nb as O,pb as a,qb as D,rb as _,sa as L,sb as H,tb as R,ua as j,va as o,za as S}from"./chunk-BJUFBHZ5.js";function f(){let i=d(x),r=d(h);return i.authenticated()?!0:r.createUrlTree(["/login"])}var F=[{path:"login",loadComponent:()=>import("./chunk-ZFFHL4PH.js").then(i=>i.Login)},{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",canActivate:[f],loadComponent:()=>import("./chunk-3NE56ALC.js").then(i=>i.Dashboard)},{path:"activities",canActivate:[f],loadComponent:()=>import("./chunk-E4WOPOTI.js").then(i=>i.ActivityList)},{path:"activities/:id",canActivate:[f],loadComponent:()=>import("./chunk-HOSLJX3G.js").then(i=>i.ActivityDetailComponent)},{path:"progression",canActivate:[f],loadComponent:()=>import("./chunk-PSYLXRK3.js").then(i=>i.Progression)},{path:"map",canActivate:[f],loadComponent:()=>import("./chunk-OGEEPKG4.js").then(i=>i.GlobalMap)}];var K={providers:[T(),B(F,U())]};function Q(i,r){if(i&1&&(e(0,"p",29),a(1),n()),i&2){let t=p(2);o(),R("",t.city,"",t.city&&t.country?", ":"","",t.country)}}function W(i,r){if(i&1&&(e(0,"div",31)(1,"span",32),a(2,"Poids"),n(),e(3,"span",33),a(4),n()()),i&2){let t=p(2);o(4),_("",t.weight," kg")}}function X(i,r){if(i&1){let t=N();e(0,"div",25),b("click",function(){w(t);let m=p(2);return C(m.profileOpen.set(!1))}),e(1,"div",26),s(2,"img",27),e(3,"p",28),a(4),n(),c(5,Q,2,3,"p",29),n(),e(6,"div",30),c(7,W,5,1,"div",31),e(8,"div",31)(9,"span",32),a(10,"Activit\xE9s"),n(),e(11,"span",33),a(12),n()(),e(13,"div",31)(14,"span",32),a(15,"Distance totale"),n(),e(16,"span",33),a(17),n()(),e(18,"div",31)(19,"span",32),a(20,"Temps total"),n(),e(21,"span",33),a(22),n()(),e(23,"div",31)(24,"span",32),a(25,"D\xE9nivel\xE9 total"),n(),e(26,"span",33),a(27),n()(),s(28,"hr",34),e(29,"button",35),b("click",function(m){w(t);let A=p(2);return C(A.logout(m))}),a(30," Se d\xE9connecter "),n()()()}if(i&2){let t=p(),l=p();o(2),M("src",t.profile,L)("alt",t.firstname),o(2),H("",t.firstname," ",t.lastname),o(),v(t.city||t.country?5:-1),o(2),v(t.weight?7:-1),o(5),D(l.strava.activitiesCount()),o(5),_("",l.strava.totalDistanceKm()," km"),o(5),_("",l.strava.totalTimeHours()," h"),o(5),_("",l.strava.totalElevation()," m")}}function Y(i,r){if(i&1){let t=N();e(0,"div",18)(1,"button",19),b("click",function(){w(t);let m=p();return C(m.profileOpen.set(!m.profileOpen()))}),s(2,"img",20),e(3,"span",21),a(4),n(),u(),e(5,"svg",22),s(6,"path",23),n()(),c(7,X,31,10,"div",24),n()}if(i&2){let t=r,l=p();o(2),M("src",t.profile,L)("alt",t.firstname),o(2),D(t.firstname),o(),O("rotate-180",l.profileOpen()),o(2),v(l.profileOpen()?7:-1)}}var y=class i{strava=d(x);router=d(h);profileOpen=V(!1);onDocumentClick(r){r.target.closest(".relative")||this.profileOpen.set(!1)}logout(r){r.stopPropagation(),this.profileOpen.set(!1),this.strava.logout(),this.router.navigate(["/login"])}constructor(){S(()=>{this.strava.athlete()||this.strava.loadAthlete()})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-navbar"]],hostBindings:function(t,l){t&1&&b("click",function(A){return l.onDocumentClick(A)},j)},decls:34,vars:1,consts:[[1,"bg-navy","text-white","shadow-xl"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6"],[1,"flex","items-center","justify-between","h-14","sm:h-16"],["routerLink","/",1,"flex","items-center","gap-2","sm:gap-3","text-lg","sm:text-xl","font-bold","tracking-tight"],[1,"text-xl","sm:text-2xl","bg-strava","rounded-lg","w-8","h-8","sm:w-9","sm:h-9","flex","items-center","justify-center","shadow-md","shrink-0"],[1,"hidden","sm:inline"],[1,"font-light","opacity-80"],[1,"sm:hidden"],[1,"flex","gap-0.5","sm:gap-1","bg-navy-light/50","rounded-xl","p-1"],["routerLink","/dashboard","routerLinkActive","!bg-strava !shadow-md",1,"px-2.5","sm:px-5","py-1.5","sm:py-2","rounded-lg","text-xs","sm:text-sm","font-medium","hover:bg-white/10","transition-all","duration-200","flex","items-center","gap-1.5"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","sm:hidden"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm10 0a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zm10 0a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"],["routerLink","/activities","routerLinkActive","!bg-strava !shadow-md",1,"px-2.5","sm:px-5","py-1.5","sm:py-2","rounded-lg","text-xs","sm:text-sm","font-medium","hover:bg-white/10","transition-all","duration-200","flex","items-center","gap-1.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],["routerLink","/progression","routerLinkActive","!bg-strava !shadow-md",1,"px-2.5","sm:px-5","py-1.5","sm:py-2","rounded-lg","text-xs","sm:text-sm","font-medium","hover:bg-white/10","transition-all","duration-200","flex","items-center","gap-1.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],["routerLink","/map","routerLinkActive","!bg-strava !shadow-md",1,"px-2.5","sm:px-5","py-1.5","sm:py-2","rounded-lg","text-xs","sm:text-sm","font-medium","hover:bg-white/10","transition-all","duration-200","flex","items-center","gap-1.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"],[1,"relative"],[1,"flex","items-center","gap-2.5","cursor-pointer","hover:opacity-80","transition-opacity",3,"click"],[1,"w-8","h-8","rounded-full","ring-2","ring-white/20","object-cover",3,"src","alt"],[1,"hidden","sm:inline","text-sm","font-medium","opacity-90"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3.5","h-3.5","opacity-60","hidden","sm:block","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"absolute","right-0","top-12","w-64","bg-white","rounded-2xl","shadow-xl","border","border-slate-200/60","overflow-hidden","z-50"],[1,"absolute","right-0","top-12","w-64","bg-white","rounded-2xl","shadow-xl","border","border-slate-200/60","overflow-hidden","z-50",3,"click"],[1,"bg-gradient-to-br","from-strava","to-orange-600","p-5","text-center","text-white"],[1,"w-16","h-16","rounded-full","ring-3","ring-white/30","mx-auto","mb-2","object-cover",3,"src","alt"],[1,"font-bold","text-lg"],[1,"text-sm","opacity-80","mt-0.5"],[1,"p-4","space-y-2.5","text-sm","text-slate-600"],[1,"flex","justify-between"],[1,"text-slate-400"],[1,"font-semibold","text-slate-700"],[1,"border-slate-200","!my-3"],[1,"w-full","text-left","text-red-500","hover:text-red-600","font-medium","cursor-pointer","transition-colors",3,"click"]],template:function(t,l){if(t&1&&(e(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"span",4),a(5,"\u{1F3C3}"),n(),e(6,"span",5),a(7,"Strava "),e(8,"span",6),a(9,"Dashboard"),n()(),e(10,"span",7),a(11,"Strava"),n()(),e(12,"div",8)(13,"a",9),u(),e(14,"svg",10),s(15,"path",11),n(),g(),e(16,"span",5),a(17,"Dashboard"),n()(),e(18,"a",12),u(),e(19,"svg",10),s(20,"path",13),n(),g(),e(21,"span",5),a(22,"Activit\xE9s"),n()(),e(23,"a",14),u(),e(24,"svg",10),s(25,"path",15),n(),g(),e(26,"span",5),a(27,"Progression"),n()(),e(28,"a",16),u(),e(29,"svg",10),s(30,"path",17),n(),g(),e(31,"span",5),a(32,"Carte"),n()()(),c(33,Y,8,6,"div",18),n()()()),t&2){let m;o(33),v((m=l.strava.athlete())?33:-1,m)}},dependencies:[P,z],encapsulation:2})};function Z(i,r){i&1&&s(0,"app-navbar")}var E=class i{strava=d(x);router=d(h);constructor(){S(()=>{this.handleOAuthCallback()})}async handleOAuthCallback(){let t=new URLSearchParams(window.location.search).get("code");if(!t)return;window.history.replaceState({},"",window.location.pathname),await this.strava.handleOAuthCallback(t)&&this.router.navigate(["/dashboard"])}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=k({type:i,selectors:[["app-root"]],decls:4,vars:1,consts:[[1,"min-h-screen","bg-gradient-to-br","from-slate-50","to-slate-100"],[1,"animate-fade-in"]],template:function(t,l){t&1&&(e(0,"div",0),c(1,Z,1,0,"app-navbar"),e(2,"main",1),s(3,"router-outlet"),n()()),t&2&&(o(),v(l.strava.authenticated()?1:-1))},dependencies:[G,y],encapsulation:2})};I(E,K).catch(i=>console.error(i));
